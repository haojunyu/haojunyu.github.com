<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="chrome=1">
    	<title>
    		禹过留声
     	</title>
    	<meta name="viewport" content="width=device-width">
    	<meta name="description" content=" 人生到处知何似，应似飞鸿踏雪泥 ">
    	<link rel="canonical" href="/haojunyu/2015/10/10/C%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6.html">
    	<link href="/themes/cool/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    	<!-- Custom CSS -->
    	<!-- build:css /release/style.css -->
    	<link rel="stylesheet" href="/themes/cool/css/normalize.css">
    	<link rel="stylesheet" href="/themes/cool/css/main.css">
    	<link rel="stylesheet" href="/themes/cool/css/posts.css">
    	<link rel="stylesheet" href="/themes/cool/css/pygments.css">
    	<link rel="stylesheet" href="/themes/cool/css/pages.css">
    	<link rel="stylesheet" href="/themes/cool/css/duoshuo.css">
    	<!-- endbuild -->

		<!-- Google Analytics -->
    	<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-67273073-1', 'auto');
			ga('send', 'pageview');
		</script>

		<!-- Cnzz Analysis
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
			document.write(unescape("%3Cspan id='cnzz_stat_icon_1256284061'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1256284061' type='text/javascript'%3E%3C/script%3E"));
		</script>		-->
    	<!-- Baidu Analysis -->
    	<script>
			if (window.location.href.substr(7, 9) !== 'localhost') {
				var _hmt = _hmt || [];
				(function() {
					var hm = document.createElement("script");
					hm.src = "//hm.baidu.com/hm.js?7e4d2ceadae9d07003cf8a93e067b798";
					var s = document.getElementsByTagName("script")[0];
					s.parentNode.insertBefore(hm, s);
				})();
			}
		</script>

		<!-- 统计页面访问 不蒜子-->
		<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    	<!-- handle external js files -->
    	<script type="text/javascript" src="/themes/cool/js/lib/jquery/jquery.min.js"></script>

    	<!-- help function for jsonp -->
    	<script>
        var jsonp = function(url, args) {
            var head = document.getElementsByTagName('head')[0],
                    script = document.createElement("script"),
                    first = true,
                    value;

            for (var key in args) {
                if (args.hasOwnProperty(key)) {
                    value = encodeURIComponent(args[key]);
                    url += first ? ('?' + key + '=' + value) : ('&' + key + '=' + value);
                    first = false;
                }
            }
            script.src= url;
            head.appendChild(script);
        }
    	</script>

    	<!-- index -->
    	<script type="text/javascript" >
    		$(document).ready(function(){
    			$("#contents  h2").each(function(){
    				$("#navleft ul").append("<li class='tag-" + this.nodeName.toLowerCase() + "'><a href='#" + $(this).text().toLowerCase().replace(/ /g, '-') + "'>" + $(this).text().substr(0,8) + "</a></li>");
    				$(this).attr("id",$(this).text().toLowerCase().replace(/ /g, '-'));
    				$("#navleft ul li:first-child a").parent().addClass("active");
    			});
  			});

  			$("#navleft ul li a").live("click",function(event) {
    			$("body").animate({scrollTop:$($(this).attr("href")).offset().top-190},400);
    			$("#navleft ul li a").parent().removeClass("active");
    			$(this).parent().addClass("active");
    			event.preventDefault();
  			});
    	</script>

    	<!--数学公式用mathjax编辑-->
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
				tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
			});
		</script>
		<script type="text/javascript" src="http://mathjax.josephjctang.com/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	</head>


	<body>

	<header class="site-header">
  		<div class="wrap">
    		<a class="site-title" href="/">
    		C语言编程之运算符
    		</a>
    		<nav class="site-nav">
      	<div class="trigger">
        			
          				<a class="page-link" href="/index.html">首页</a>
						
        			
          				<a class="page-link" href="/navigations/archives.html">文章归档</a>
						
        			
          				<a class="page-link" href="/navigations/skills.html">技能图谱</a>
						
        			
          				<a class="page-link" href="/navigations/contact.html">关于我</a>
						
        			
          				<a class="page-link" href="/navigations/links.html">友情链接</a>
						
        			
          				<a class="page-link" href="/navigations/atom.xml">RSS订阅</a>
						
        			
      	</div>
    		</nav>
  		</div>
	</header>

    <div class="page-content">
      <div class="wrap">
        	
				

					<div class="index-part">
						<nav id="navleft">
							<ul></ul>
						</nav>
					</div>

        			<div id="contents" class="central-right">
        			<div class="post">
						<header class="post-header">
    						<h1>C语言编程之运算符</h1>
    						<p class="meta">Oct 10, 2015 <span class="pause"> - </span>
								<span id="busuanzi_container_page_pv">
								浏览量:	<span id="busuanzi_value_page_pv"></span>
								</span>次 <span class="pause"> |
        						
            					
               			 		<a class="label" href="/navigations/archives.html/?label=C">C</a>
            					
               			 		<a class="label" href="/navigations/archives.html/?label=Coding">Coding</a>
            					
        						
    						</p>
  						</header>

  						<article class="post-content">
  							<p>在C语言中有很多运算符，像求字节数运算符[sizeof]，赋值运算符,算术运算符,关系运算符,逻辑运算符，条件运算符，位运算符，指针运算符等。这些运算符在运算时是有优先级的，会最终影响结果。所以了解其优先级以及运算方法是挺重要的（虽然本人觉得这些都可以通过加括号来解决，但是还是要了解一下，以便更快读懂他人程序）。</p>

<h2>类型转换</h2>

<p>在C语言中，有很多双目运算符（一个运算符有两个操作数），一般情况下两个操作数的数据类型要是一样的，不过当两边类型不一致时就要进行<mark>类型转换</mark>。而类型转换的最基本的原则是<mark>往最高级转换</mark>。其转换的关系如下图：<br>
<img src="/assets/images/convert_type.png" alt="convert_type"><br>
图中纵向代表转换的顺序，int-&gt;unsigned-&gt;long-&gt;double;而两个横向的转换是当表达式中出现了float会当作double来处理，出现了short，char类型都会当作int来处理，也就是说这步是必须的，必须执行的转换。所以我们得到以下的结论：</p>

<ol>
<li>表达式的结果类型只有int/unsigned/long/double四种类型。</li>
<li>表达式的结果类型只要看表达式中数据类型最高的那个。</li>
</ol>

<h2>自增/自减</h2>

<p>自增和自减概念类似，这里以自增为例。自增包括前自增和后自增。前自增（++i）是指变量先自增，然后将自增后的结果当作表达式的值;而后自增（i++）是指变量先将值当作表达式的值，然后再自增1。这个在大学学C语言就知道了，这里在提及是为了下面关于自增/自减的两种使用情况。</p>

<ol>
<li><p>自增/自减操作符只能用于变量，不能用于表达式</p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include&lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i++ = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="o">++</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;++i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="o">++</span><span class="n">i</span><span class="p">);</span>
    <span class="n">rintf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>

    <span class="c1">// error: lvalue required as increment operand</span>
    <span class="c1">//printf(&quot;(-i)++ = %d\n&quot;,(-i)++);</span>
    <span class="c1">//printf(&quot;++i++ = %d\n&quot;,++i++);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>由注释的三行可知：当给表达式进行自增操作的时候，回报左值需要增量操作数。</p></li>
<li><p>在输出中，计算顺序是从右往左</p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include&lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="c1">// 输出多个自增</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d, i++ =%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">++</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i++ = %d, ++i =%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="o">++</span><span class="n">i</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>根据下图输出的截图，我们发现运算的顺序是从右往左的。代码见<a href="/assets/attachs/selfinc.c.txt">附件</a>。</p>

<p><img src="/assets/images/increasment.png" alt="increasment">  </p></li>
</ol>

<h2>混合运算</h2>

<p>虽然本人觉得这部分绝对是装x的作死的，因为多用（）就能解决表达式的可读性，但为了读懂某些装x作死的coder写的code，还是稍微了解一下。</p>

<ul>
<li><p>操作符的优先级</p>

<ol>
<li>括号级别<br>
这是C语言中运算级别最高的操作符了。<br>
<img src="/assets/images/operator1.png" alt="operator1"></li>
<li>单目运算符<br>
第二级别的运算符有两个共同的特征:

<ul>
<li>它们都是单目运算符（强制类型转换和长度运算符sizeof个人也觉得算单目）</li>
<li>它们都是从右往左运算的（右撇子三剑客之一）。
<img src="/assets/images/operator2.png" alt="operator2"></li>
</ul></li>
<li><p>双目运算符<br>
第三级别里面的操作符就“群魔乱舞”了。  </p>

<ol>
<li>算术运算符<br>
对于算术运算符，可能都知道乘除高于加减，但是还得记得取模%和乘除是同级的。<br>
<img src="/assets/images/operator34.png" alt="operator34"><br></li>
<li>移位运算符<br>
有点疑问，见问题&amp;回答1。<br>
<img src="/assets/images/operator5.png" alt="operator5"><br></li>
<li>关系运算符<br>
记住一点，大于小于高于等于。<br>
<img src="/assets/images/operator67.png" alt="operator67"><br></li>
<li>位操作符和逻辑操作符<br>
位操作符和逻辑操作符算是双目运算符中比较特殊的两个操作符，其特殊之处如下：<br>

<ul>
<li>按位取反操作符和逻辑非操作符是单目运算符，跻身第二级别</li>
<li>按位操作符优先级高于逻辑操作符</li>
<li>按位与&amp; &gt; 按位异或^ &gt; 按位或|; 逻辑与&amp;&amp; &gt; 逻辑或||</li>
</ul></li>
</ol>

<p><img src="/assets/images/operator8-12.png" alt="operator8-12">  </p></li>
<li><p>三目运算符<br>
这也是从右往左运算的操作符（右撇子三剑客之一）
<img src="/assets/images/operator13.png" alt="operator13"></p></li>
<li><p>赋值家族运算符
这是除了不常用的逗号运算符以外优先基本最低的运算符了，而且也是最后一个从右往左运算的操作（右撇子三剑客之一）。
<img src="/assets/images/operator14.png" alt="operator14"></p></li>
<li><p>逗号运算符
这是优先级别最低的运算符，也是最不常用的运算符。
<img src="/assets/images/operator15.png" alt="operator15"></p></li>
</ol></li>
<li><p>记忆要诀<br>
上面的优先级还是比较繁琐的，还是下面的基础要诀比较重要：  </p>

<ul>
<li>括号最重要，操作数越多优先级越低（单目&gt;双目&gt;三目）<br></li>
<li>双目中，算术运算符 &gt; 移位运算符 &gt; 关系运算符 &gt; 位操作符 &gt; 逻辑操作符<br></li>
<li>三目运算符（条件运算符） &gt; 赋值家族运算符 &gt; 逗号运算符<br></li>
<li>相同优先级中，按结合顺序计算。只有三种运算符是从右往左的，分别是单目运算符，条件运算符和赋值运算符。<br></li>
</ul></li>
<li><p>剪刀法切割表达式  </p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">short</span> <span class="n">s</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">f</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="n">u</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="mi">123</span><span class="o">%</span><span class="n">s</span><span class="o">+</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="sc">&#39;@&#39;</span><span class="p">)</span><span class="o">+</span><span class="n">i</span><span class="o">*</span><span class="n">u</span><span class="o">-</span><span class="n">f</span><span class="o">/</span><span class="n">d</span><span class="p">);</span>
</code></pre></div>
<p>剪刀法是将表达式中的符号按照优先级由低到高的顺序依次减开，而且除了右撇子三剑客之外都要从右往左开始剪。比如上式表达式中按下面的顺序剪开：</p>

<ol>
<li>u-f</li>
<li>）+i</li>
<li>s+(<br>
此时表达式将变成四个部分，分别是123%s[int]，(i+&#39;@&#39;)[int],i*u[unsigned],f/d[double]。最终的结果也是double类型的。</li>
</ol></li>
</ul>

<h2>问题&amp;回答</h2>

<ol>
<li>Q：在移位运算符中，我们发现其用法是变量&gt;&gt;表达式，按理说这样的用法4&gt;&gt;1应该会报错的（和自增/自减类似），但是执行代码<code>printf(&quot;%d\n&quot;,4&gt;&gt;1);</code>会获得结果2。<br>
A: 尚且无解</li>
</ol>

<h2>参考文献</h2>

<ol>
<li><a href="https://www.coursera.org/learn/jisuanji-biancheng/home/week/8">计算机导论与C语言基础</a></li>
<li><a href="http://www.jb51.net/article/37282.htm">C语言运算符优先级列表</a></li>
<li><a href="https://www.baidu.com/link?url=Dxl9sKUNMilpQ6j0ntrsvTU9x_XC4SO_oLhDdDGf0eH5j66dL9L4Am84PcUWKIt9qIhzz8ymJ358i_1jtuzcfq&wd=&eqid=d2c31b200000d9dd000000045625cbc3">运算符优先级</a></li>
</ol>

  						</article>

						<p class="copyright">
    						本文的版权归作者 <a href="mailto:haojunyu2012@gmail.com">郝俊禹</a> 所有，采用 <a href="http://creativecommons.org/licenses/by-nc/3.0/">Attribution-NonCommercial 3.0 License</a>。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！
  						</p>

						<div class="comment">
							
								<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="CCoding" data-title="C语言编程之运算符" data-url="//2015/10/10/C%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"haojunyu"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

							
						</div>
					</div>
				

        	
      </div>
    </div>

    <footer class="site-footer">
    	<div class="wrap">
        <ul class="friend-links footer-text">
            <li><a href="http://mindhacks.cn/">刘未鹏</a></li>
            <li><a href="http://blog.csdn.net/zouxy09/">zouxy09</a></li>
            <li><a href="http://blog.codinglabs.org/">codinglabs</a></li>
            <li><a href="http://www.52nlp.cn/">52nlp</a></li>
            <li><a href="http://jerryzou.com/">jerryzou</a></li>
            <li><a href="http://www.acmerblog.com/">acmerblog</a></li>
        </ul>
        <p class="footer-text">Powered by <a href="http://jekyllrb.com/">Jekyll</a> ， <a href="https://pages.github.com/">Github Pages</a> ， <a href="http://wiki.jikexueyuan.com/project/react/getting-started.html">React</a> and <a href="http://haojunyu.duoshuo.com/admin/">多说</a>.</p>
    	</div>
	</footer>

	</body>
</html>

