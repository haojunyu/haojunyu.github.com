<div class="home">
  <ul class="posts">
    {% for post in paginator.posts %}
    	<!-- if post.release --> 
      <li>
        <a class="post-link" href="{{ site.baseurl }}{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a>
        <p class="post-date">Posted on {{ post.date | date: "%b %-d, %Y" }} ;
            浏览量: <span class="visit-count" data-link="{{ site.baseurl }}{{ post.url }}">0</span>次
        	{% for label in post.labels %}
        	<a href="{{ site.baseurl }}/all-articles/?label={{ label }}"><span class="post-label">{{ label }}</span></a>
        	{% endfor %}
        </p>
        <p class="post-description">{{ post.excerpt }} </p>
      </li>
       <!-- endif --> 
    {% endfor %}
  </ul>

  {% if paginator.total_pages > 1 %}
  <div class="pagination">
    {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path | prepend: site.baseurl | replace: '//', '/' }}" class="prev">&laquo; Prev</a>
    {% else %}
    <span class="prev">&laquo; Prev</span>
    {% endif %}

    {% for page in (1..paginator.total_pages) %}
    {% if page == paginator.page %}
    <span class="current">{{ page }}</span>
    {% elsif page == 1 %}
    <a href="/">{{ page }}</a>
    {% else %}
    <a href="/{{ 'page:num' | prepend: site.baseurl | replace: '//', '/' | replace: ':num', page }}">{{ page }}</a>
    {% endif %}
    {% endfor %}

    {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path | prepend: site.baseurl | replace: '//', '/' }}" class="next">Next &raquo;</a>
    {% else %}
    <span class="next">Next &raquo;</span>
    {% endif %}
  </div>
  {% endif %}
</div>

<script>
    jsonp('http://analytics1.sinaapp.com/page.php', {
        callback: 'getCallback',
        type: 'getByDomain',
        domain: 'http://jerryzou.com'
    });

    function getCallback(result) {
        for (var i = 0; i < result.length; i++) {
            $('.visit-count[data-link="'+ result[i].url +'"]').html(result[i].count);
        }
    }
</script>