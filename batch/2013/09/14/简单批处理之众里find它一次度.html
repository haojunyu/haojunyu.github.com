<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="chrome=1">
    	<title>
      	
            简单批处理之众里find它一次度 | 禹过留声
        
     	</title>
    	<meta name="viewport" content="width=device-width">
    	<meta name="description" content=" 人生到处知何似，应似飞鸿踏雪泥 ">
    	<link rel="alternate" type="application/rss+xml" title="咀嚼之味 RSS" href="/feed.xml">
    	<link rel="canonical" href="/haojunyu/batch/2013/09/14/%E7%AE%80%E5%8D%95%E6%89%B9%E5%A4%84%E7%90%86%E4%B9%8B%E4%BC%97%E9%87%8Cfind%E5%AE%83%E4%B8%80%E6%AC%A1%E5%BA%A6.html">
    	<link href="/themes/cool/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    	<!-- Custom CSS -->
    	<!-- build:css /release/style.css -->
    	<link rel="stylesheet" href="/themes/cool/css/normalize.css">
    	<link rel="stylesheet" href="/themes/cool/css/main.css">
    	<link rel="stylesheet" href="/themes/cool/css/posts.css">
    	<link rel="stylesheet" href="/themes/cool/css/pygments.css">
    	<link rel="stylesheet" href="/themes/cool/css/pages.css">
    	<link rel="stylesheet" href="/themes/cool/css/duoshuo.css">
    	<!-- endbuild -->

    	<!-- Baidu Analysis -->
    	<script>
        if (window.location.href.substr(7, 9) !== 'localhost') {
            var _hmt = _hmt || [];
            (function() {
                var hm = document.createElement("script");
                hm.src = "//hm.baidu.com/hm.js?2744fd74aa568e064f9986394a60ead1";
                var s = document.getElementsByTagName("script")[0]; 
                s.parentNode.insertBefore(hm, s);
            })();
        }
    </script>

    	<!-- Google Analytics -->
    	<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-47842677-1', 'auto');
        ga('send', 'pageview');
    </script>
    
    	<!-- handle external js files -->
    	<script type="text/javascript" src="/themes/cool/js/lib/jquery/jquery-1.11.1.min.js"></script>

    	<!-- help function for jsonp -->
    	<script>
        var jsonp = function(url, args) {
            var head = document.getElementsByTagName('head')[0],
                    script = document.createElement("script"),
                    first = true,
                    value;

            for (var key in args) {
                if (args.hasOwnProperty(key)) {
                    value = encodeURIComponent(args[key]);
                    url += first ? ('?' + key + '=' + value) : ('&' + key + '=' + value);
                    first = false;
                }
            }
            script.src= url;
            head.appendChild(script);
        }
    </script>
	</head>


	<body>

	<header class="site-header">
  		<div class="wrap">
    		<a class="site-title" href="/">禹过留声</a>
    		<nav class="site-nav">
      	<div class="trigger">
        			
          				<a class="page-link" href="/index.html">首页</a>
						
        			
          				<a class="page-link" href="/navigations/categories.html">分类目录</a>
						
        			
          				<a class="page-link" href="/navigations/archives.html">文章归档</a>
						
        			
          				<a class="page-link" href="/navigations/contact.html">联系我</a>
						
        			
          				<a class="page-link" href="/navigations/links.html">友情链接</a>
						
        			
        		<a class="page-link" href="/feed.xml">RSS订阅</a>
      	</div>
    		</nav>
  		</div>
	</header>

    <div class="page-content">
      <div class="wrap">
        	
        				<p>在批处理的过程中,经常需要查找文件以及在文件中查找相关字符串.在linux中有<code>grep</code>,<code>awk</code>,<code>sed</code>等命令,不过windows里面也有类似的命令,如这次介绍的<code>find</code>,<code>findstr</code>.</p>

<h2>find</h2>

<h3>用法</h3>

<ul>
<li>Usage:
<code>batch
rem command:
find [/v][/c][/n][/i] &quot;string&quot; [[drive:][path]filename]
</code></li>
<li><p>Parameter:  </p>

<blockquote>
<p><code>/v</code>    显示所有未包含指定字符串的行。<br>
<code>/c</code>    仅显示包含字符串的行数。<br>
<code>/n</code>    显示行号。<br>
<code>/i</code>    搜索字符串时忽略大小写。 </p>
</blockquote></li>
</ul>

<h3>案例</h3>

<ol>
<li><p>在文本test.txt中查找包含&quot;Abc”的整行，并显示(不区分大小写)</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">find <span class="n">/i</span> “Abc” test.txt
</code></pre></div></li>
<li><p>在文本test.txt中查找不包含&quot;Abc&quot;的整行，并显示  </p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">find <span class="n">/v</span> <span class="s2">&quot;Abc&quot;</span> test.txt
</code></pre></div></li>
<li><p>在文本test.txt中查找&quot;Abc&quot;出现的次数  </p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">find <span class="n">/n</span> <span class="s2">&quot;Abc&quot;</span> test.txt
</code></pre></div></li>
<li><p>在字符串&quot;abcdef”中查找&quot;abc&quot;(支持管道用法)  </p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch"><span class="k">echo</span> abcdef <span class="p">|</span> <span class="n">find</span> <span class="s2">&quot;abc&quot;</span>
</code></pre></div></li>
</ol>

<h2>findstr--find的扩展</h2>

<h3>用法</h3>

<ul>
<li><p>Usage:</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch"><span class="c">rem Command:</span>
find [<span class="n">/v][/c][/n][/i]</span> strings [[drive:][path]filename]
</code></pre></div></li>
<li><p>Parameter:  </p>

<blockquote>
<p><code>/b</code>    在一行的开始配对模式。(就是指以字符串开头，begin 这样就方便了记忆)<br>
<code>/e</code>    在一行的结尾配对模式。（就是指以字符串结尾，end 这样就方便记忆）<br>
<code>/l</code>    按字使用搜索字符串。就是将后面的&quot;&quot;里的当成一个字符<br>
<code>/r</code>    将搜索字符串作为一般表达式使用。<br>
<code>/s</code>    在当前目录和所有子目录中搜索匹配文件。<br>
<code>/i</code>    指定搜索不分大小写。（英文：ignore 忽略）<br>
<code>/x</code>    打印完全匹配的行。/x 是指完全匹配,就是说整行匹配,而不是含有关键字.<br>
<code>/v</code>    只打印不包含匹配的行。（就是找出不包含字符串的）<br>
<code>/n</code>    在匹配的每行前打印行数。（就是在输出行的前面加上原文件中的行数--number）<br>
<code>/m</code>    如果文件含有匹配项，只打印其文件名。（指定文件中输出含有字符串的文件名）<br>
<code>/o</code>    在每个匹配行前打印字符偏移量。o开关的作用是告诉你每行第一个字符前的位置是该文件中的第几个字节<br>
<code>/C:string</code> 使用指定字符串作为文字搜索字符串<br>
<code>/G:file</code> 从指定的文件获得搜索字符串。(/代表控制台)<br>
<code>/F:file</code> 从指定文件读文件列表 (/ 代表控制台)。<br>
<code>/D:dir</code> 查找以分号为分隔符的目录列表<br>
<strong>Sign:</strong><br>
<code>.</code>   通配符: 任何字符<br>
<code>*</code>   重复: 以前字符或类别出现零或零以上次数<br>
<code>^</code>   行位置: 行的开始<br>
<code>$</code>   行位置: 行的终点<br>
<code>[class]</code> 字符类别: 任何在字符集中的字符<br>
<code>[^class]</code>    补字符类别: 任何不在字符集中的字符<br>
<code>[x-y]</code>   范围: 在指定范围内的任何字符<br>
<code>\x</code>  Escape: 元字符 x 的文字用法<br>
<code>\&lt;xyz</code>   字位置: 字的开始<br>
<code>xyz\&gt;</code>   字位置: 字的结束<br>
<code>\&lt;</code>和<code>\&gt;</code>   是单词锚定 ^是行首 $是行尾  </p>
</blockquote></li>
</ul>

<h3>案例</h3>

<ol>
<li><p>在文件x.y中搜索&quot;hello&quot;或&quot;there&quot;</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="s2">&quot;hello there&quot;</span>  x.y
</code></pre></div></li>
<li><p>在文件x.y中搜索&quot;hello there&quot;</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="n">/c:&quot;hello</span> there&quot; x.y
</code></pre></div></li>
<li><p>把1.txt中含有2.txt中任何一行内容的行输出来</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="n">/g:2.txt</span> <span class="m">1</span>.txt
<span class="c">rem 等价于:</span>
<span class="p">@</span><span class="k">echo</span> <span class="k">off</span>
<span class="k">for</span> <span class="n">/f</span> <span class="s2">&quot;delims=&quot;</span> <span class="nv">%%a</span> in (<span class="m">2</span>.txt) <span class="k">do</span> (
    findstr <span class="s2">&quot;%%a&quot;</span> <span class="m">1</span>.txt
)
<span class="k">pause</span>
</code></pre></div></li>
<li><p>行开始/结束与字开始结束</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="s2">&quot;cd\&gt;&quot;</span> <span class="m">1</span>.txt
<span class="c">rem 1.txt中两行&quot;abcd&quot;和&quot;abcd e&quot;都会出现</span>
</code></pre></div></li>
<li><p>从文件2.txt中查找包括数字0-9的字符串或行</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="s2">&quot;[0-9]&quot;</span> <span class="m">2</span>.txt
</code></pre></div></li>
<li><p>匹配找到纯数字,如233432或匹配找到纯字母,如sdfsd</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr <span class="s2">&quot;^[0-9]*$&quot;</span> <span class="m">2</span>.txt
findstr “^[a-z]*$&quot; <span class="m">2</span>.txt
</code></pre></div></li>
<li><p>把1.txt文档中超过10个字符的行输入到2.txt中</p>
<div class="highlight"><pre><code class="language-batch" data-lang="batch">findstr .......... <span class="m">1</span>.txt <span class="p">&gt;</span> <span class="n">2</span>.txt
</code></pre></div></li>
</ol>

<h2>find和findstr的比较</h2>

<ol>
<li>统计含指定字符串的总行数。<code>find /c &quot;abc&quot; test.txt</code>可以统计test.txt中含有字符串abc的总行数，而findstr则没有直接提供该功能，需要配合for语句才能实现<br></li>
<li>find可以读取Unicode格式的文本，而findstr则不行</li>
</ol>

        	
      </div>
    </div>

    <footer class="site-footer">
    	<div class="wrap">
        <ul class="friend-links footer-text">
            <li><a href="http://ysyjerry1992.github.io/">Yusiyuan</a></li>
            <li><a href="http://blog.liqiang.me/">Jayce Li</a></li>
            <li><a href="http://www.dozer.cc/">Dozer</a></li>
            <li><a href="http://leuisken.github.io/">LeuisKen</a></li>
            <li><a href="http://www.yiqixxx.com/">一起网</a></li>
            <li><a href="http://dianying.taobao.com">淘宝电影</a></li>
            <li><a href="http://efe.baidu.com/">Baidu EFE</a></li>
            <li><a href="http://fex.baidu.com/">Baidu FEX</a></li>
        </ul>
        <p class="footer-text">Powered by <a href="http://jekyllrb.com/">Jekyll</a> , <a href="https://pages.github.com/">Github Pages</a> and <a href="https://www.upyun.com/">UPYUN</a>.</p>
    	</div>
	</footer>

	</body>
</html>
